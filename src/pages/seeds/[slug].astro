---
import SeedLayout from '../../layouts/SeedLayout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const seeds = await getCollection('seeds');
  return seeds.map((seed) => ({
    params: { slug: seed.id },
    props: { seed },
  }));
}

const { seed } = Astro.props;
const { Content } = await render(seed);
---

<SeedLayout title={`${seed.data.title} - Dreamseed`}>
  <div class="max-w-4xl mx-auto p-4">
    <div class="mb-8">
      <h1 class="text-2xl font-bold mb-4">
        {seed.data.title}
      </h1>
      <p class="mb-4">
        {seed.data.description}
      </p>
      <div class="flex justify-between text-sm mb-4">
        <span>By <a href={`/authors/${seed.data.author}`} class="hover:underline">{seed.data.author}</a></span>
        <time>{seed.data.publishedAt.toLocaleDateString()}</time>
      </div>
      {seed.data.tags && (
        <div class="mb-4">
          {seed.data.tags.map((tag) => (
            <span class="text-xs mr-2">#{tag}</span>
          ))}
        </div>
      )}
    </div>
    
    <div class="mb-8">
      <Content />
    </div>
    
    <div class="border-t pt-4">
      <a href="/seeds" class="hover:underline">
        ‚Üê Back to all seeds
      </a>
    </div>
  </div>
</SeedLayout>
